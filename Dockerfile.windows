FROM ubuntu:focal AS mingw

RUN set -x; apt-get update && \
    DEBIAN_FRONTEND=noniteractive apt-get -y install golang git \
    autoconf libtool libltdl-dev \
    build-essential cmake bison flex file \
    devscripts cdbs \
    mingw-w64

RUN go mod init unused; \
    go get github.com/golangci/golangci-lint/cmd/golangci-lint; \
    go get github.com/google/addlicense; \
    go get github.com/pavius/impi/cmd/impi; \
    go get github.com/google/googet/v2/goopack;

#COPY . /work
#WORKDIR /work
#RUN ./pkg/goo/build.sh
#
#FROM scratch
#COPY --from=mingw /tmp/google-cloud-ops-agent.tgz /google-cloud-ops-agent-windows-ltsc2019.tgz
#COPY --from=mingw /google-cloud-ops-agent*.goo /
