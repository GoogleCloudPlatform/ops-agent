short_name: HANA
long_name: SAP HANA
app_url: "https://www.sap.com/products/hana.html"
description: |-
  The SAP HANA integration collects SAP HANA trace logs and parses them into a
  structured log for consumption in Google Cloud Logging.
configure_integration:
supported_app_version: ["2.0"]
expected_metrics:
expected_logs:
- log_name: saphana_trace
  fields:
  - name: jsonPayload.component
    value_regex: "Basis"
    type: string
    description: SAP HANA component
  - name: jsonPayload.source_file
    value_regex: "TraceStream.cpp.*"
    type: string
    description: Source of log message
  - name: jsonPayload.thread_id
    type: number
    description: ID of the thread logging the message
  - name: jsonPayload.connection_id
    type: number
    description: ID of the connection where the message originated, if message was logged within the scope of a connection
  - name: jsonPayload.transaction_id
    type: number
    description: ID of the transaction where the message originated, if message was logged within the scope of a transaction
  - name: jsonPayload.update_transaction_id
    type: number
    description: ID of the update transaction where the message originated, if message was logged within the scope of an update transaction
  - name: jsonPayload.message
    value_regex: "==== Starting hdbpreprocessor, version 2.*"
    type: string
    description: Log message
configuration_options:
  logs:
  - type: saphana_trace
    fields:
    - name: type
      default: null
      description: The value must be saphana_trace.
    - name: include_paths
      default: '[/usr/sap/*/HDB*/${HOSTNAME}/trace/*.trc]'
      description: A list of filesystem paths to read by tailing each file. A wild card (*) can be used in the paths.
    - name: exclude_paths
      default: '[/usr/sap/*/HDB*/${HOSTNAME}/trace/nameserver_history*.trc, /usr/sap/*/HDB*/${HOSTNAME}/trace/nameserver*loads*.trc, /usr/sap/*/HDB*/${HOSTNAME}/trace/nameserver*executed_statements*.trc]'
      description: A list of filesystem path patterns to exclude from the set matched by include_paths.
    - name: wildcard_refresh_interval
      default: 60s
      description: The interval at which wildcard file paths in include_paths are refreshed. Given as a time duration, for example 30s or 2m. This property might be useful under high logging throughputs where log files are rotated faster than the default interval.